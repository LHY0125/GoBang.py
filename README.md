# Python五子棋游戏

一个基于Pygame开发的五子棋游戏，支持人机对战和复盘功能。这是一个简单而有趣的游戏项目，适合Python和游戏开发初学者学习。

## 快速开始

### 1. 一键运行（Windows）
```bash
# 安装依赖
pip install pygame

# 运行游戏
python chaogao2.py
```

### 2. 基本操作
- 鼠标左键：落子
- U键：悔棋
- R键：游戏结束后进入复盘模式
- Enter键：游戏结束后重新开始
- ESC键：退出复盘模式

### 3. 游戏目标
- 在棋盘上形成5个连续同色棋子即可获胜
- 连续的方向可以是横向、纵向或斜向

## 目录

- [快速开始](#快速开始)
- [游戏规则](#游戏规则)
- [安装说明](#安装说明)
  - [前提条件](#前提条件)
  - [安装步骤](#安装步骤)
- [使用说明](#使用说明)
  - [运行游戏](#运行游戏)
  - [系统要求](#系统要求)
- [技术实现](#技术实现)
  - [核心组件](#核心组件)
  - [游戏算法](#游戏算法)
- [常见问题解答（FAQ）](#常见问题解答faq)
- [开发指南](#开发指南)
  - [代码结构](#代码结构)
  - [主要类和函数](#主要类和函数)
  - [修改建议](#修改建议)
- [可能的扩展](#可能的扩展)
- [贡献指南](#贡献指南)
- [许可证](#许可证)
- [致谢](#致谢)

## 功能特点

- 🎮 人机对战：与AI进行五子棋对决
- 🔄 复盘功能：游戏结束后可以回放整个对局过程
- ⏪ 撤销功能：支持撤销上一步操作
- 🏆 战绩统计：记录黑白双方的胜利次数
- 🎯 高亮显示：标记最后一步落子位置

## 安装说明

### 前提条件

- Python 3.6+
- Pygame库

### 安装步骤

1. 确保已安装Python 3.6或更高版本：
   ```bash
   python --version
   ```

2. 安装Pygame库：
   ```bash
   pip install pygame
   ```

3. 下载游戏代码或克隆到本地：
   ```bash
   # 如果使用git
   git clone https://github.com/LHY0125/GoBang.py/gomoku.git
   cd gomoku
   
   # 或者直接下载源代码文件
   ```

## 使用说明

### 运行游戏

在命令行中导航到游戏目录，然后运行：

```bash
python chaogao2.py
```

### 系统要求

- 操作系统：Windows, macOS, Linux
- 最低配置：
  - 处理器：1GHz
  - 内存：512MB RAM
  - 显卡：支持基本图形显示
  - 存储空间：10MB可用空间

## 操作指南

### 基本操作

- **落子**：鼠标左键点击棋盘上的交叉点
- **重新开始**：游戏结束后按回车键(Enter)
- **撤销操作**：按U键撤销上一步（包括玩家和电脑的落子）

### 复盘功能

游戏结束后，可以使用复盘功能回顾整个对局过程：

1. **进入复盘模式**：游戏结束后按R键
2. **控制复盘进度**：
   - **开始**：回到对局开始
   - **上一步**：查看前一步
   - **下一步**：查看后一步
   - **结束**：跳到对局结束
   - **自动播放/停止播放**：自动播放整个对局过程

## 游戏规则

1. **基本规则**
   - 黑子先手，双方轮流在棋盘交叉点落子
   - 先在棋盘上形成5个连续同色棋子的一方获胜
   - 连续的棋子可以是横向、纵向或斜向

2. **特殊规则**
   - 支持无限制悔棋（按U键）
   - 游戏结束后可以按R键进入复盘模式
   - 复盘模式下可以查看整个对局过程

## 技术实现

### 核心组件

- **Checkerboard类**：
  - 管理15x15的棋盘状态
  - 处理落子逻辑和胜负判定
  - 维护对局历史记录
  - 实现悔棋和复盘功能

- **AI类**：
  - 实现电脑玩家的智能落子算法
  - 使用评分系统进行决策
  - 考虑进攻和防守策略
  - 支持不同难度级别的AI（待实现）

- **Pygame界面**：
  - 绘制棋盘和棋子
  - 处理鼠标和键盘输入
  - 显示游戏状态和提示信息
  - 实现复盘模式的可视化

### 游戏算法

- **胜负判定算法**：
  - 在每次落子后检查四个方向（横、竖、左斜、右斜）
  - 计算每个方向上连续同色棋子的数量
  - 当任意方向达到5个时判定获胜

- **AI决策算法**：
  - 对每个可能的落子位置进行评分
  - 考虑己方和对方的潜在连子情况
  - 优先选择能形成更多连子的位置
  - 同时注意防守对方的威胁位置

- **复盘系统实现**：
  - 记录每一步落子的位置和顺序
  - 支持前进、后退和自动播放
  - 实现对局过程的完整重现

## 常见问题解答（FAQ）

1. **Q: 为什么按R键没有反应？**
   - A: R键只有在游戏结束后才能使用。游戏进行中会显示灰色提示，游戏结束后会变为蓝色提示。

2. **Q: 如何退出复盘模式？**
   - A: 在复盘模式下按ESC键可以退出复盘模式。

3. **Q: 悔棋次数有限制吗？**
   - A: 没有限制，你可以一直按U键悔棋，直到回到游戏开始。

4. **Q: 如何调整AI的难度？**
   - A: 目前AI难度是固定的，后续版本会添加难度选择功能。

5. **Q: 游戏进度会保存吗？**
   - A: 目前不支持保存游戏进度，但这个功能已经列入开发计划。

## 代码结构

```
chaogao2.py        # 主游戏文件
```

## 开发指南

如果你想修改或扩展这个游戏，以下是一些有用的信息：

### 代码结构

```
chaogao2.py        # 主游戏文件，包含所有游戏逻辑和界面代码
```

### 主要类和函数

- `Checkerboard` 类：棋盘逻辑
  - `drop(self, x, y, color)`: 在指定位置落子
  - `check_win(self)`: 检查是否有一方获胜
  - `undo(self)`: 撤销上一步操作
  - `replay_to(self, step)`: 复盘到指定步骤

- `AI` 类：AI逻辑
  - `get_drop_pos(self, checkerboard)`: 获取AI的落子位置
  - `evaluate(self, checkerboard, x, y, color)`: 评估位置分数

- 主要函数：
  - `_draw_checkerboard(screen)`: 绘制棋盘
  - `_draw_chess(screen, x, y, color)`: 绘制棋子
  - `_draw_left_info(...)`: 绘制左侧信息面板

### 修改建议

1. **改进AI算法**：
   - 在`AI`类中修改`evaluate`方法可以改变AI的决策策略
   - 考虑实现更高级的算法，如极小化极大算法或蒙特卡洛树搜索

2. **添加新功能**：
   - 在主循环中添加新的按键处理来实现新功能
   - 使用Pygame的定时器功能添加时间限制

3. **改进UI**：
   - 修改`_draw_*`函数来改变游戏界面
   - 添加更多视觉反馈和动画效果

## 可能的扩展

- [ ] **网络对战功能**：
  - 添加客户端-服务器架构
  - 实现玩家匹配系统
  - 添加在线排行榜

- [ ] **不同难度级别的AI**：
  - 简单：随机落子或基础评分
  - 中等：当前AI算法
  - 困难：使用更深层次的搜索算法

- [ ] **游戏增强功能**：
  - 添加背景音乐和音效
  - 支持自定义棋盘大小（如13x13、19x19）
  - 实现游戏存档和读取功能
  - 添加计时器和限时模式

- [ ] **UI改进**：
  - 添加开始菜单和设置界面
  - 实现主题切换功能
  - 添加动画效果

## 贡献指南

欢迎提交问题和改进建议！如果你想为这个项目做出贡献，请遵循以下步骤：

1. **提出问题**：如果你发现了bug或有功能建议，请先创建一个issue
2. **代码贡献**：
   - Fork本仓库
   - 创建您的特性分支 (`git checkout -b feature/amazing-feature`)
   - 编写代码并测试
   - 提交您的更改 (`git commit -m 'Add some amazing feature'`)
   - 推送到分支 (`git push origin feature/amazing-feature`)
   - 打开一个Pull Request

### 代码风格指南

- 遵循PEP 8 Python代码风格指南
- 为函数和类添加适当的文档字符串
- 使用有意义的变量和函数名称
- 添加注释解释复杂的逻辑

## 许可证

本项目采用MIT许可证 - 这意味着你可以自由使用、修改和分发这个项目，只需保留原始许可证和版权声明。

## 致谢

- Pygame社区提供的优秀游戏开发库
- 所有为本项目提供反馈和建议的用户
- 五子棋游戏算法的开源贡献者
